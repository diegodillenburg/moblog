var _MlogModule=(()=>{var d=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var z=Object.prototype.hasOwnProperty;var j=(s,t,e)=>t in s?d(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var T=(s,t)=>{for(var e in t)d(s,e,{get:t[e],enumerable:!0})},I=(s,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of C(t))!z.call(s,i)&&i!==e&&d(s,i,{get:()=>t[i],enumerable:!(o=S(t,i))||o.enumerable});return s};var $=s=>I(d({},"__esModule",{value:!0}),s);var x=(s,t,e)=>(j(s,typeof t!="symbol"?t+"":t,e),e);var F={};T(F,{Mlog:()=>h,default:()=>H});var p=class{constructor(t){this.onLog=t,this.originals={},this.installed=!1}install(){if(this.installed)return;["log","info","warn","error","debug"].forEach(e=>{this.originals[e]=console[e],console[e]=(...o)=>{this.originals[e].apply(console,o);let i=o.map(l=>{if(l===null)return"null";if(l===void 0)return"undefined";if(typeof l=="object")try{return JSON.stringify(l,null,2)}catch(n){return String(l)}return String(l)}).join(" ");this.onLog({type:e==="log"?"log":e,message:i,timestamp:Date.now()})}}),this.installed=!0}uninstall(){this.installed&&(Object.keys(this.originals).forEach(t=>{console[t]=this.originals[t]}),this.originals={},this.installed=!1)}};var u=class{constructor(t){this.onError=t,this.installed=!1,this.boundErrorHandler=this.handleError.bind(this),this.boundRejectionHandler=this.handleRejection.bind(this)}install(){this.installed||(window.addEventListener("error",this.boundErrorHandler),window.addEventListener("unhandledrejection",this.boundRejectionHandler),this.installed=!0)}uninstall(){this.installed&&(window.removeEventListener("error",this.boundErrorHandler),window.removeEventListener("unhandledrejection",this.boundRejectionHandler),this.installed=!1)}handleError(t){let{message:e,filename:o,lineno:i,colno:l,error:n}=t,a="";n&&n.stack?a=this.formatStack(n.stack):o&&(a=`  at ${o}:${i}:${l}`),this.onError({type:"error",message:e||"Unknown error",stack:a,timestamp:Date.now()})}handleRejection(t){let e=t.reason,o="Unhandled Promise Rejection",i="";if(e)if(e instanceof Error)o=e.message||o,i=e.stack?this.formatStack(e.stack):"";else if(typeof e=="string")o=e;else try{o=JSON.stringify(e)}catch(l){o=String(e)}this.onError({type:"error",message:`[Promise] ${o}`,stack:i,timestamp:Date.now()})}formatStack(t){return t.split(`
`).slice(1,5).map(e=>e.trim()).join(`
`)}};var R=`
  #mlog-overlay {
    --mlog-bg: rgba(0, 0, 0, 0.92);
    --mlog-border: #333;
    --mlog-text: #e0e0e0;
    --mlog-log: #b8b8b8;
    --mlog-info: #58a6ff;
    --mlog-warn: #d29922;
    --mlog-error: #f85149;
    --mlog-debug: #8b949e;
    --mlog-fab-bg: rgba(30, 30, 30, 0.95);
    --mlog-fab-border: #58a6ff;
    --mlog-btn-bg: #21262d;
    --mlog-btn-hover: #30363d;
    --mlog-input-bg: #161b22;

    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: 50vh;
    background: var(--mlog-bg);
    color: var(--mlog-text);
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
    font-size: 12px;
    z-index: 999999;
    display: flex;
    flex-direction: column;
    border-top: 1px solid var(--mlog-border);
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
    transition: all 0.25s ease;
  }

  #mlog-overlay.mlog-minimized {
    bottom: auto;
    top: 50%;
    left: auto;
    right: 16px;
    transform: translateY(-50%);
    width: 52px;
    height: 52px;
    max-height: 52px;
    border-radius: 50%;
    background: var(--mlog-fab-bg);
    border: 2px solid var(--mlog-fab-border);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }

  #mlog-overlay.mlog-minimized .mlog-header,
  #mlog-overlay.mlog-minimized .mlog-filters,
  #mlog-overlay.mlog-minimized .mlog-logs {
    display: none;
  }

  #mlog-overlay.mlog-minimized .mlog-fab-icon {
    display: block;
  }

  .mlog-fab-icon {
    display: none;
    font-size: 22px;
    color: var(--mlog-fab-border);
  }

  .mlog-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.4);
    border-bottom: 1px solid var(--mlog-border);
    flex-shrink: 0;
    gap: 8px;
  }

  .mlog-title {
    font-weight: 600;
    font-size: 13px;
    color: var(--mlog-fab-border);
  }

  .mlog-controls {
    display: flex;
    gap: 6px;
  }

  .mlog-btn {
    background: var(--mlog-btn-bg);
    color: var(--mlog-text);
    border: 1px solid var(--mlog-border);
    padding: 6px 10px;
    cursor: pointer;
    font-family: inherit;
    font-size: 11px;
    border-radius: 4px;
    min-width: 36px;
    min-height: 32px;
    transition: background 0.15s;
  }

  .mlog-btn:hover {
    background: var(--mlog-btn-hover);
  }

  .mlog-btn:active {
    background: var(--mlog-fab-border);
    color: #000;
  }

  .mlog-filters {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    background: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid var(--mlog-border);
    flex-shrink: 0;
    flex-wrap: wrap;
  }

  .mlog-filter-btn {
    background: transparent;
    color: var(--mlog-text);
    border: 1px solid var(--mlog-border);
    padding: 4px 8px;
    cursor: pointer;
    font-family: inherit;
    font-size: 10px;
    border-radius: 3px;
    opacity: 0.5;
    transition: all 0.15s;
  }

  .mlog-filter-btn.active {
    opacity: 1;
    border-color: currentColor;
  }

  .mlog-filter-btn[data-level="log"] { color: var(--mlog-log); }
  .mlog-filter-btn[data-level="info"] { color: var(--mlog-info); }
  .mlog-filter-btn[data-level="warn"] { color: var(--mlog-warn); }
  .mlog-filter-btn[data-level="error"] { color: var(--mlog-error); }
  .mlog-filter-btn[data-level="debug"] { color: var(--mlog-debug); }

  .mlog-search {
    flex: 1;
    min-width: 100px;
    max-width: 200px;
    background: var(--mlog-input-bg);
    border: 1px solid var(--mlog-border);
    color: var(--mlog-text);
    padding: 4px 8px;
    font-family: inherit;
    font-size: 11px;
    border-radius: 3px;
  }

  .mlog-search::placeholder {
    color: #666;
  }

  .mlog-search:focus {
    outline: none;
    border-color: var(--mlog-fab-border);
  }

  .mlog-logs {
    flex: 1;
    overflow-y: auto;
    padding: 4px 0;
    overscroll-behavior: contain;
  }

  .mlog-line {
    padding: 4px 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    word-break: break-word;
    line-height: 1.4;
  }

  .mlog-line:hover {
    background: rgba(255, 255, 255, 0.03);
  }

  .mlog-line.log { color: var(--mlog-log); }
  .mlog-line.info { color: var(--mlog-info); }
  .mlog-line.warn { color: var(--mlog-warn); }
  .mlog-line.error { color: var(--mlog-error); }
  .mlog-line.debug { color: var(--mlog-debug); }

  .mlog-time {
    color: #666;
    margin-right: 8px;
    font-size: 10px;
  }

  .mlog-stack {
    margin-top: 4px;
    padding-left: 16px;
    font-size: 10px;
    color: #888;
    white-space: pre-wrap;
  }

  .mlog-line-count {
    font-size: 10px;
    color: #666;
  }

  @media (max-width: 480px) {
    #mlog-overlay {
      max-height: 60vh;
    }

    .mlog-header {
      flex-wrap: wrap;
    }

    .mlog-filters {
      padding: 8px;
    }

    .mlog-search {
      width: 100%;
      max-width: none;
      order: -1;
    }
  }
`;function L(){if(document.getElementById("mlog-styles"))return;let s=document.createElement("style");s.id="mlog-styles",s.textContent=R,document.head.appendChild(s)}function k(){let s=document.getElementById("mlog-styles");s&&s.remove()}var f=class{constructor(t={}){this.options={maxLines:200,startMinimized:!0,position:"bottom-right",onCopy:null,onClear:null,onExport:null,onFilterChange:null,onSearchChange:null,...t},this.logs=[],this.element=null,this.logsEl=null,this.searchEl=null,this.lineCountEl=null,this.activeFilters=new Set(["log","info","warn","error","debug"]),this.searchText=""}create(){L(),this.element=document.createElement("div"),this.element.id="mlog-overlay",this.options.startMinimized&&this.element.classList.add("mlog-minimized"),this.element.innerHTML=`
      <div class="mlog-fab-icon">M</div>
      <div class="mlog-header">
        <span class="mlog-title">mlog</span>
        <span class="mlog-line-count">0 lines</span>
        <div class="mlog-controls">
          <button class="mlog-btn" data-action="copy" title="Copy">Copy</button>
          <button class="mlog-btn" data-action="export" title="Export">Export</button>
          <button class="mlog-btn" data-action="clear" title="Clear">Clear</button>
          <button class="mlog-btn" data-action="minimize" title="Minimize">_</button>
        </div>
      </div>
      <div class="mlog-filters">
        <input type="text" class="mlog-search" placeholder="Filter logs...">
        <button class="mlog-filter-btn active" data-level="log">LOG</button>
        <button class="mlog-filter-btn active" data-level="info">INFO</button>
        <button class="mlog-filter-btn active" data-level="warn">WARN</button>
        <button class="mlog-filter-btn active" data-level="error">ERROR</button>
        <button class="mlog-filter-btn active" data-level="debug">DEBUG</button>
      </div>
      <div class="mlog-logs"></div>
    `,document.body.appendChild(this.element),this.logsEl=this.element.querySelector(".mlog-logs"),this.searchEl=this.element.querySelector(".mlog-search"),this.lineCountEl=this.element.querySelector(".mlog-line-count"),this.bindEvents()}bindEvents(){this.element.addEventListener("click",o=>{var n,a,c,m,v,y,w,E;if(this.element.classList.contains("mlog-minimized")){this.show();return}let i=o.target.closest(".mlog-btn");if(i){let g=i.dataset.action;g==="copy"&&((a=(n=this.options).onCopy)==null||a.call(n)),g==="export"&&((m=(c=this.options).onExport)==null||m.call(c)),g==="clear"&&((y=(v=this.options).onClear)==null||y.call(v)),g==="minimize"&&this.hide()}let l=o.target.closest(".mlog-filter-btn");if(l){let g=l.dataset.level;l.classList.toggle("active"),l.classList.contains("active")?this.activeFilters.add(g):this.activeFilters.delete(g),(E=(w=this.options).onFilterChange)==null||E.call(w,{levels:Array.from(this.activeFilters),text:this.searchText}),this.render()}});let t;this.searchEl.addEventListener("input",o=>{clearTimeout(t),t=setTimeout(()=>{var i,l;this.searchText=o.target.value.toLowerCase(),(l=(i=this.options).onSearchChange)==null||l.call(i,this.searchText),this.render()},150)}),document.addEventListener("keydown",o=>{o.key==="Escape"&&!this.element.classList.contains("mlog-minimized")&&this.hide()});let e=0;document.addEventListener("touchend",o=>{let i=Date.now();i-e<300&&(o.target.closest("#mlog-overlay")||this.toggle()),e=i})}addLog(t){for(this.logs.push(t);this.logs.length>this.options.maxLines;)this.logs.shift();this.shouldShowLog(t)&&(this.appendLogLine(t),this.updateLineCount())}shouldShowLog(t){return this.activeFilters.has(t.type)?this.searchText?t.message.toLowerCase().includes(this.searchText):!0:!1}appendLogLine(t){let e=document.createElement("div");e.className=`mlog-line ${t.type}`;let i=`<span class="mlog-time">${new Date(t.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}</span>${this.escapeHtml(t.message)}`;for(t.stack&&(i+=`<div class="mlog-stack">${this.escapeHtml(t.stack)}</div>`),e.innerHTML=i,this.logsEl.appendChild(e);this.logsEl.children.length>this.options.maxLines;)this.logsEl.removeChild(this.logsEl.firstChild);this.logsEl.scrollTop=this.logsEl.scrollHeight}escapeHtml(t){let e=document.createElement("div");return e.textContent=t,e.innerHTML}render(){this.logsEl.innerHTML="",this.logs.forEach(t=>{this.shouldShowLog(t)&&this.appendLogLine(t)}),this.updateLineCount()}updateLineCount(){let t=this.logsEl.children.length,e=this.logs.length;this.lineCountEl.textContent=t===e?`${e} lines`:`${t}/${e} lines`}clear(){this.logs=[],this.logsEl.innerHTML="",this.updateLineCount()}show(){this.element.classList.remove("mlog-minimized")}hide(){this.element.classList.add("mlog-minimized")}toggle(){this.element.classList.toggle("mlog-minimized")}destroy(){this.element&&(this.element.remove(),this.element=null),k()}getLogsText(){return this.logs.map(t=>{let o=`[${new Date(t.timestamp).toISOString()}] [${t.type.toUpperCase()}] ${t.message}`;return t.stack&&(o+=`
${t.stack}`),o}).join(`
`)}getLogsJson(){return JSON.stringify(this.logs,null,2)}};var b=class{constructor(t={}){this.options={storageKey:"mlog-logs",maxEntries:200,useLocalStorage:!1,...t},this.storage=this.options.useLocalStorage?localStorage:sessionStorage}save(t){try{let e=t.slice(-this.options.maxEntries);this.storage.setItem(this.options.storageKey,JSON.stringify(e))}catch(e){}}load(){try{let t=this.storage.getItem(this.options.storageKey);if(t)return JSON.parse(t)}catch(t){}return[]}clear(){try{this.storage.removeItem(this.options.storageKey)}catch(t){}}};var r=class r{static isDisabledByQueryParam(){return typeof window=="undefined"?!1:new URLSearchParams(window.location.search).get("mlog")==="false"}static init(t={}){return r.isDisabledByQueryParam()?(r.disabled=!0,r.createNoopInstance()):(r.instance||(r.instance=new r(t)),r.instance)}static createNoopInstance(){return{log:()=>{},show:()=>{},hide:()=>{},toggle:()=>{},clear:()=>{},filter:()=>{},copy:()=>{},export:()=>{},destroy:()=>{}}}static destroy(){r.instance&&(r.instance.destroy(),r.instance=null)}constructor(t={}){this.options={maxLines:200,startMinimized:!0,position:"bottom-right",theme:"dark",captureConsole:!0,captureErrors:!0,capturePromiseRejections:!0,persist:!0,storageKey:"mlog-logs",filter:{levels:["log","info","warn","error","debug"],text:null},onLog:null,onError:null,...t},this.logs=[],this.consoleInterceptor=null,this.errorInterceptor=null,this.overlay=null,this.persistence=null,this.init()}init(){this.options.persist&&(this.persistence=new b({storageKey:this.options.storageKey,maxEntries:this.options.maxLines}),this.logs=this.persistence.load()),this.overlay=new f({maxLines:this.options.maxLines,startMinimized:this.options.startMinimized,position:this.options.position,onCopy:()=>this.copy(),onClear:()=>this.clear(),onExport:()=>this.export("txt"),onFilterChange:t=>{this.options.filter=t}}),this.overlay.create(),this.logs.forEach(t=>{this.overlay.addLog(t)}),this.options.captureConsole&&(this.consoleInterceptor=new p(t=>{this.addEntry(t)}),this.consoleInterceptor.install()),(this.options.captureErrors||this.options.capturePromiseRejections)&&(this.errorInterceptor=new u(t=>{var e,o;this.addEntry(t),(o=(e=this.options).onError)==null||o.call(e,t)}),this.errorInterceptor.install())}addEntry(t){var e,o;for(this.logs.push(t);this.logs.length>this.options.maxLines;)this.logs.shift();this.overlay.addLog(t),(o=(e=this.options).onLog)==null||o.call(e,t),this.persistence&&this.persistence.save(this.logs)}log(t,e="log"){this.addEntry({type:e,message:String(t),timestamp:Date.now()})}show(){var t;(t=this.overlay)==null||t.show()}hide(){var t;(t=this.overlay)==null||t.hide()}toggle(){var t;(t=this.overlay)==null||t.toggle()}clear(){var t,e;this.logs=[],(t=this.overlay)==null||t.clear(),(e=this.persistence)==null||e.clear()}filter(t){var e;t.levels&&(this.options.filter.levels=t.levels),t.text!==void 0&&(this.options.filter.text=t.text),(e=this.overlay)==null||e.render()}copy(){var e;let t=((e=this.overlay)==null?void 0:e.getLogsText())||"";navigator.clipboard.writeText(t).then(()=>this.log("Logs copied to clipboard","info"),o=>this.log(`Failed to copy: ${o.message}`,"error"))}export(t="txt"){var c,m;let e,o,i;t==="json"?(e=((c=this.overlay)==null?void 0:c.getLogsJson())||"[]",o=`mlog-${Date.now()}.json`,i="application/json"):(e=((m=this.overlay)==null?void 0:m.getLogsText())||"",o=`mlog-${Date.now()}.txt`,i="text/plain");let l=new Blob([e],{type:i}),n=URL.createObjectURL(l),a=document.createElement("a");a.href=n,a.download=o,a.click(),URL.revokeObjectURL(n),this.log(`Exported as ${o}`,"info")}destroy(){var t,e,o;(t=this.consoleInterceptor)==null||t.uninstall(),(e=this.errorInterceptor)==null||e.uninstall(),(o=this.overlay)==null||o.destroy(),this.consoleInterceptor=null,this.errorInterceptor=null,this.overlay=null,this.persistence=null,this.logs=[]}};x(r,"instance",null),x(r,"disabled",!1);var h=r;var H=h;return $(F);})();
var Mlog=_MlogModule.default||_MlogModule.Mlog;if(typeof module!=="undefined")module.exports=Mlog;
